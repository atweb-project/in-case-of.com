(function(){var e=function(e){var t=this,n=e;e.require().script("ui/core","ui/widget","ui/position","ui/menu").stylesheet("ui/autocomplete").done(function(){var e=function(){(function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9pre",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t=this,n,r,i;this.isMultiLine=this.element.is("textarea,[contenteditable]"),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(s){if(t.options.disabled||t.element.prop("readOnly")){n=!0,i=!0,r=!0;return}n=!1,i=!1,r=!1;var o=e.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:n=!0,t._move("previousPage",s);break;case o.PAGE_DOWN:n=!0,t._move("nextPage",s);break;case o.UP:n=!0,t._keyEvent("previous",s);break;case o.DOWN:n=!0,t._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:t.menu.active&&(n=!0,s.preventDefault());case o.TAB:if(!t.menu.active)return;t.menu.select(s);break;case o.ESCAPE:t.menu.element.is(":visible")&&(t._value(t.term),t.close(s));break;default:r=!0,t._searchTimeout(s)}}).bind("keypress.autocomplete",function(i){if(n){n=!1,i.preventDefault();return}if(r)return;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t._move("previousPage",i);break;case s.PAGE_DOWN:t._move("nextPage",i);break;case s.UP:t._keyEvent("previous",i);break;case s.DOWN:t._keyEvent("next",i)}}).bind("input.autocomplete",function(e){if(i){i=!1,e.preventDefault();return}t._searchTimeout(e)}).bind("focus.autocomplete",function(){if(t.options.disabled)return;t.selectedItem=null,t.previous=t._value()}).bind("blur.autocomplete",function(e){if(t.options.disabled)return;clearTimeout(t.searching),t.cancelSearch=!0,t.closing=setTimeout(function(){t.close(e),t._change(e)},150)}),this._initSource(),this.response=function(){return t._response.apply(t,arguments)},this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).mousedown(function(n){var r=t.menu.element[0];e(n.target).closest(".ui-menu-item").length||setTimeout(function(){t.document.one("mousedown",function(n){n.target!==t.element[0]&&n.target!==r&&!e.contains(r,n.target)&&t.close()})},1),setTimeout(function(){clearTimeout(t.closing)},13)}).menu({input:e(),focus:function(e,n){var r=n.item.data("item.autocomplete");!1!==t._trigger("focus",e,{item:r})&&/^key/.test(e.originalEvent.type)&&t._value(r.value)},select:function(e,n){var r=n.item.data("item.autocomplete"),i=t.previous;t.element[0]!==t.document[0].activeElement&&(t.element.focus(),t.previous=i,setTimeout(function(){t.previous=i,t.selectedItem=r},1)),!1!==t._trigger("select",e,{item:r})&&t._value(r.value),t.term=t._value(),t.close(e),t.selectedItem=r}}).zIndex(this.element.zIndex()+1).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),this._bind(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this.document.find(t||"body")[0]),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_initSource:function(){var t=this,r,i;e.isArray(this.options.source)?(r=this.options.source,this.source=function(t,n){n(e.ui.autocomplete.filter(r,t.term))}):typeof this.options.source=="string"?(i=this.options.source,this.source=function(r,s){t.xhr&&t.xhr.abort(),t.xhr=e.ajax({url:i,data:r,dataType:"json",autocompleteRequest:++n,success:function(e,t){this.autocompleteRequest===n&&s(e)},error:function(){this.autocompleteRequest===n&&s([])}})}):this.source=this.options.source},_searchTimeout:function(e){var t=this;clearTimeout(t.searching),t.searching=setTimeout(function(){t.term!==t._value()&&(t.selectedItem=null,t.search(null,e))},t.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);clearTimeout(this.closing);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this.response)},_response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.blur(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItem(t,n)})},_renderItem:function(t,n){return e("<li></li>").data("item.autocomplete",n).append(e("<a></a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(e){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}})})(n)};e(),t.resolveWith(e)})};dispatch("ui/autocomplete").containing(e).to("Foundry/2.1 Modules")})();