dispatch.to("Foundry/2.1 Core Plugins").at(function(e,t){var n=e.Component=function(e,t,r){return arguments.length<1?n.registry:arguments.length<2?n.registry[e]:n.register(e,t,r)};n.registry={},n.proxy=function(t,n,r){e.isFunction(r)?t[n]=e.proxy(r,t):t[n]=r},n.register=function(t,r,i){var s=window[t]?window[t].queue||[]:[],o=n.registry[t]=window[t]=function(t){return e.isFunction(t)?t(e):component};e.each(n.prototype,function(e,t){n.proxy(o,e,t)}),o.$=e,o.options=r,o.className=t,o.identifier=t.toLowerCase(),o.componentName="com_"+o.identifier,o.version=r.version,o.environment=r.environment||e.environment,o.debug=o.environment=="development",o.language="en",o.baseUrl=r.baseUrl||e.indexUrl+"?option="+o.componentName,o.scriptPath=r.scriptPath||e.rootPath+"media/"+o.componentName+(o.debug?"/scripts_/":"/scripts/"),o.templatePath=r.templatePath||r.scriptPath,o.languagePath=r.languagePath||o.baseUrl+"&tmpl=component&no_html=1&controller=lang&task=getLanguage",o.viewPath=r.viewPath||o.baseUrl+"&tmpl=component&no_html=1&controller=themes&task=getAjaxTemplate",o.prefix=o.identifier+"/",o.isReady=!1,o.dependencies=e.Deferred();var u=function(){o.dependencies.resolve(),o.ready(function(){o.isReady=!0,o.run(i)})};if(e.isFunction(r.dependencies)){var a=o.require({loadingComponentDependencies:!0});r.dependencies.call(o,a),a.done(u)}else u();e.each(s,function(t,n){e.isPlainObject(n)&&o[n.method].apply(o,n.args);if(e.isArray(n)){var r=n,i=o;e.each(r,function(e,t){i=i[t.method].apply(i,t.args)})}})},n.extend=function(t,r){n.prototype[t]=r,e.each(n.registry,function(e,i){n.proxy(i,t,r)})},e.extend(n.prototype,{run:function(t){return e.isFunction(t)?t(e):component},ready:function(t){if(!e.isFunction(t))return;var n=this;e.module("component/mvc").done(function(){n.dependencies.done(function(){e(document).ready(function(){n.run(t)})})})},template:function(t){var n=this;return t==undefined?e.grep(e.template(),function(e){return e.indexOf(n.prefix)==0}):(arguments[0]=n.prefix+t,e.template.apply(null,arguments))},require:function(t){var n=this,t=t||{},r=e.require(e.extend(t,{path:n.scriptPath})),i=r.library,s=r.script,o=r.language,u=r.template,a=r.done,f;return r.script=f=function(){var t=e.makeArray(arguments),i=e.map(t,function(t){if(e.isPlainObject(t)||e.isArray(t)||e.isUrl(t)||/^(\/|\.)/.test(t))return t;var r=n.prefix+t,i=n.scriptPath+t+".js";return[[r,i,!0]]});return s.apply(r,i)},r.template=function(){var t=e.makeArray(arguments),i={path:n.templatePath},s=[];return e.isPlainObject(t[0])?(i=e.extend(t[0],i),s=t.slice(1)):s=t,s=e.map(s,function(e){return templateName=n.prefix+e,[[templateName,e]]}),u.apply(r,[i].concat(s))},r.view=function(){var t=this,i=e.makeArray(arguments),s={path:n.viewPath},o=[];e.isPlainObject(i[0])?(s=e.extend(i[0],s),o=i.slice(1)):o=i;var u=[];if(!s.reload){var a=e.template();o=e.grep(o,function(t){var r=n.prefix+t,i=e.template.loaders[r];return i?u.push(i):e.template.loaders[r]=e.Deferred(),!i}),e.template.loaders[n.prefix+name]}if(o.length<1)return r;var f=e.when.apply(null,u.concat([e.ajax({url:s.path,dataType:"json",data:{names:o}}).success(function(t){e.isArray(t)&&e.each(t,function(t,r){var i=n.prefix+r.name;e.template(i,r.content),e.template.loaders[i].resolveWith(e,[r.content])})})]));return f.name="View "+n.prefix+o.join(", "+n.prefix),t.addTask(f),r},r.library=function(){return r.script=s,i.apply(r,arguments),r.script=f,r},r.language=function(){var t=e.makeArray(arguments),i={path:n.languagePath},s=[];return e.isPlainObject(t[0])?(i=e.extend(t[0],i),s=t.slice(1)):s=t,o.apply(r,[i].concat(s))},r.done=function(i){return a.call(r,function(){e.module("component/mvc").done(t.loadingComponentDependencies?function(){i.call(n,e)}:function(){n.ready(i)})})},r},module:function(t,n){var r=this;if(e.isArray(t))return;return t=r.prefix+t,e.module.apply(null,[t,function(){var t=this;e.module("component/mvc").done(function(){n.call(t,e)})}])}}),e.module("component/mvc",function(){var t=this;e.require().library("server","mvc/controller","mvc/model","mvc/view","mvc/view.ejs","mvc/lang.json").done(function(){e.Component.extend("ajax",function(t,n,r){var i=this,s={url:e.indexUrl,data:e.extend(n,{option:i.componentName,namespace:t})};return s=e.extend(!0,s,this.options.ajax),s.data.hasOwnProperty("args")&&(s.data.args=e.toJSON(s.data.args)),r.type=="jsonp"&&(delete r.type,r.dataType="jsonp",r.crossDomain=!0),e.isPlainObject(r)&&e.extend(s,r),e.isFunction(r)&&(s.success=r),e.server(s)}),e.Component.extend("Controller",function(){var t=this,n=e.makeArray(arguments),r=t.className+".Controller."+n[0],i,s;return n.length==1?e.String.getObject(n[0]):(n.length>2?(i=n[1],s=n[2]):(i={},s=n[1]),e.extend(i,{component:t}),e.Controller.apply(this,[r,i,s]))}),e.Component.extend("View",function(t){var n=this;return arguments.length<1?n.template():(arguments[0]=n.prefix+arguments[0],e.View.apply(this,arguments))}),t.resolve()})}),dispatch("Foundry/2.1").toAll()});